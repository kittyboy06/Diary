import{c as B,r as o,j as e,u as De,a as He,t as f,L as $e}from"./index-DhOZtvq_.js";import{S as re,g as _e,a as ze,b as Fe,c as Ee,e as Pe,B as Te,C as Oe,u as Ye,d as Ae,f as Ie,h as Re,i as Le,j as Xe,t as qe}from"./habitService-CkPCSVqk.js";import{S as Ge}from"./Skeleton-WmNf-OMr.js";import{m as P}from"./proxy-KJzlWBNf.js";import{P as me}from"./pen-t9_PJwIX.js";import{C as We}from"./clock-Cz5IPMAx.js";import{T as ge,P as Be}from"./trash-2-BgFK1ysd.js";import{t as C,c as W,g as Ue,f as j,s as oe}from"./format-mVbgGZla.js";import{a as Je,i as Ke}from"./isToday-W0RLf5oP.js";import{F as Qe}from"./folder-plus-B1kbGnQb.js";import{F as Ve}from"./folder-DE4cHLjw.js";import{A as G}from"./index-Cew7ddLj.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=B("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function be(s,n){const l=C(s);if(isNaN(n))return W(s,NaN);if(!n)return l;const d=l.getDate(),r=W(s,l.getTime());r.setMonth(l.getMonth()+n+1,0);const m=r.getDate();return d>=m?r:(l.setFullYear(r.getFullYear(),r.getMonth(),d),l)}function de(s){const n=C(s),l=n.getMonth();return n.setFullYear(n.getFullYear(),l+1,0),n.setHours(23,59,59,999),n}function ce(s){const n=C(s);return n.setDate(1),n.setHours(0,0,0,0),n}function ue(s,n){var v,g;const l=Ue(),d=l.weekStartsOn??((g=(v=l.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??0,r=C(s),m=r.getDay(),u=(m<d?-7:0)+6-(m-d);return r.setDate(r.getDate()+u),r.setHours(23,59,59,999),r}function E(s){const n=C(s),l=n.getFullYear(),d=n.getMonth(),r=W(s,0);return r.setFullYear(l,d+1,0),r.setHours(0,0,0,0),r.getDate()}function tt(s,n){const l=C(s),d=C(n);return l.getFullYear()===d.getFullYear()&&l.getMonth()===d.getMonth()}function st(s,n){return be(s,-1)}function xe({value:s,max:n,onChange:l,color:d="indigo"}){o.useRef(null);const r=o.useRef(null),m=c=>{v(c)},u=c=>{c.buttons===1&&v(c)},v=c=>{if(!r.current)return;const b=r.current.getBoundingClientRect(),w=b.left+b.width/2,h=b.top+b.height/2,N=c.clientX||(c.touches?c.touches[0].clientX:0),x=c.clientY||(c.touches?c.touches[0].clientY:0),$=N-w,T=x-h;let S=Math.atan2(T,$)*(180/Math.PI)+90;S<0&&(S+=360);let k=Math.round(S/360*n);k===n&&(k=0),l(k)},g=s/n*360;return e.jsxs("div",{className:"relative w-48 h-48 md:w-56 md:h-56 mx-auto touch-none select-none",onPointerDown:m,onPointerMove:u,ref:r,children:[e.jsx("div",{className:"absolute inset-0 rounded-full bg-neutral-100 dark:bg-slate-800 shadow-inner border border-neutral-200 dark:border-slate-700"}),[...Array(12)].map((c,b)=>{const w=b*30,h=b%3===0;return e.jsx("div",{className:"absolute w-full h-full flex justify-center pt-2 pointer-events-none",style:{transform:`rotate(${w}deg)`},children:e.jsx("div",{className:`w-0.5 ${h?"h-3 bg-neutral-400":"h-1.5 bg-neutral-300"} rounded-full`})},b)}),e.jsx(P.div,{className:"absolute inset-0 flex justify-center",animate:{rotate:g},transition:{type:"spring",stiffness:150,damping:20},children:e.jsx("div",{className:"h-[50%] w-1 bg-gradient-to-t from-transparent via-indigo-500 to-indigo-600 origin-bottom relative top-0 rounded-full",children:e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-white dark:bg-slate-900 border-4 border-indigo-500 rounded-full shadow-lg"})})}),e.jsx("div",{className:"absolute inset-0 m-auto w-3 h-3 bg-indigo-500 rounded-full shadow-lg"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none mt-12 opacity-20",children:e.jsx("span",{className:"text-4xl font-bold",children:s})})]})}function at({hours:s,minutes:n,onSave:l}){const[d,r]=o.useState(s),[m,u]=o.useState(n),[v,g]=o.useState(!1),[c,b]=o.useState("hours");o.useEffect(()=>{r(s),u(n)},[s,n]);const w=()=>{l(d,m),g(!1)},h=(parseInt(d)||0)*60+(parseInt(m)||0);let N="text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-900/30";return h>120&&(N="text-amber-500 bg-amber-50 dark:bg-amber-900/20 border-amber-100 dark:border-amber-900/30"),h>300&&(N="text-rose-500 bg-rose-50 dark:bg-rose-900/20 border-rose-100 dark:border-rose-900/30"),!v&&(s!==""||n!=null)?e.jsxs("div",{onClick:()=>g(!0),className:`group flex items-center justify-between p-4 rounded-3xl border transition-all cursor-pointer ${N}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/50 dark:bg-black/20 rounded-2xl backdrop-blur-sm",children:e.jsx(re,{size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg leading-tight",children:["Screen Time: ",d,"h ",m,"m"]}),e.jsx("p",{className:"text-xs font-medium opacity-80",children:h>300?"Try to reduce this!":"Great balance!"})]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{className:"p-2 hover:bg-white/20 rounded-xl",children:e.jsx(me,{size:18})})})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-3xl border border-neutral-100 dark:border-slate-700 shadow-sm flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 dark:bg-slate-700 text-neutral-500 dark:text-slate-300 rounded-2xl",children:e.jsx(re,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("p",{className:"text-sm font-bold text-neutral-800 dark:text-white",children:"Set Screen Time"}),e.jsxs("div",{className:"flex bg-neutral-100 dark:bg-slate-700 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>b("hours"),className:`px-3 py-1 text-xs font-bold rounded-lg transition-all ${c==="hours"?"bg-white dark:bg-slate-600 shadow-sm text-indigo-600 dark:text-indigo-400":"text-neutral-500 dark:text-slate-400 hover:text-neutral-700"}`,children:"Hours"}),e.jsx("button",{onClick:()=>b("minutes"),className:`px-3 py-1 text-xs font-bold rounded-lg transition-all ${c==="minutes"?"bg-white dark:bg-slate-600 shadow-sm text-indigo-600 dark:text-indigo-400":"text-neutral-500 dark:text-slate-400 hover:text-neutral-700"}`,children:"Minutes"})]})]}),e.jsx("div",{className:"mb-6",children:c==="hours"?e.jsxs("div",{className:"flex flex-col items-center animate-in fade-in zoom-in duration-300",children:[e.jsx(xe,{value:parseInt(d)||0,max:24,onChange:x=>r(x)}),e.jsxs("p",{className:"mt-4 font-bold text-2xl text-indigo-600 dark:text-indigo-400",children:[d," ",e.jsx("span",{className:"text-sm text-neutral-400 dark:text-slate-500 font-medium",children:"hours"})]})]}):e.jsxs("div",{className:"flex flex-col items-center animate-in fade-in zoom-in duration-300",children:[e.jsx(xe,{value:parseInt(m)||0,max:60,onChange:x=>u(x)}),e.jsxs("p",{className:"mt-4 font-bold text-2xl text-indigo-600 dark:text-indigo-400",children:[m," ",e.jsx("span",{className:"text-sm text-neutral-400 dark:text-slate-500 font-medium",children:"minutes"})]})]})}),e.jsxs("button",{onClick:w,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-indigo-900/20 flex items-center justify-center gap-2",children:[e.jsx(We,{size:18}),"Save Time"]})]})]})}function he({habit:s,isCompleted:n,handleToggle:l,handleDelete:d,handleEdit:r,streak:m}){return e.jsxs("div",{onClick:l,className:`
                group relative flex items-center justify-between p-4 rounded-2xl border transition-all cursor-pointer select-none
                ${n?`bg-${s.color}-500 border-${s.color}-600 text-white shadow-lg shadow-${s.color}-500/20`:"bg-white dark:bg-slate-800 border-neutral-100 dark:border-slate-700 hover:border-indigo-200 dark:hover:border-slate-600"}
            `,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`
                        w-8 h-8 rounded-xl flex items-center justify-center transition-all
                        ${n?"bg-white/20":`bg-${s.color}-100 dark:bg-slate-700 text-${s.color}-500`}
                    `,children:n?e.jsx(Ze,{size:18,strokeWidth:3}):e.jsx("div",{className:`w-3 h-3 rounded-full bg-${s.color}-500`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-lg leading-tight ${n?"text-white":"text-neutral-800 dark:text-slate-200"}`,children:s.name}),e.jsxs("p",{className:`text-xs font-medium ${n?"text-white/80":"text-neutral-400"}`,children:["Goal: ",s.target_days," days â€¢ Completed: ",m]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-100 lg:opacity-0 lg:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),r()},className:`p-2 rounded-lg transition-colors ${n?"hover:bg-white/20 text-white":"hover:bg-indigo-50 text-neutral-300 hover:text-indigo-500"}`,children:e.jsx(me,{size:18})}),e.jsx("button",{onClick:u=>{u.stopPropagation(),d()},className:`p-2 rounded-lg transition-colors ${n?"hover:bg-white/20 text-white":"hover:bg-red-50 text-neutral-300 hover:text-red-500"}`,children:e.jsx(ge,{size:18})})]})]})}function bt(){const{currentUser:s}=De(),{t:n}=He(),[l,d]=o.useState([]),[r,m]=o.useState([]),[u,v]=o.useState([]),[g,c]=o.useState(null),[b,w]=o.useState(!0),[h,N]=o.useState(new Date),[x,$]=o.useState(new Date),[T,_]=o.useState(!1),[S,k]=o.useState(!1),[U,J]=o.useState(new Set),[D,K]=o.useState(null),[O,Y]=o.useState(""),[A,H]=o.useState(30),[I,R]=o.useState("indigo"),[L,X]=o.useState(""),[Q,V]=o.useState("");o.useEffect(()=>{s&&M()},[s,x]),o.useEffect(()=>{s&&Z(h)},[s,h]);const M=async()=>{try{w(!0);const[t,a]=await Promise.all([_e(s.id),ze(s.id)]);d(t||[]),m(a||[]);const i=new Set(a==null?void 0:a.map(F=>F.id));J(i);const p=j(oe(ce(x)),"yyyy-MM-dd"),y=j(ue(de(x)),"yyyy-MM-dd"),z=await Fe(s.id,p,y);v(z||[])}catch(t){console.error(t),f.error("Failed to load data")}finally{w(!1)}},Z=async t=>{try{const a=j(t,"yyyy-MM-dd"),i=await Ee(s.id,a);if(i&&i.screen_time_minutes!==null){const p=i.screen_time_minutes;c({hours:Math.floor(p/60),minutes:p%60})}else c(null)}catch(a){console.error(a)}},fe=async(t,a)=>{const i=(parseInt(t)||0)*60+(parseInt(a)||0),p=j(h,"yyyy-MM-dd");c({hours:t,minutes:a});try{await Ye(s.id,p,i),f.success("Screen time saved")}catch{f.error("Failed to save screen time"),Z(h)}},pe=async t=>{t.preventDefault();try{D?(await Ae(D.id,{name:O,target_days:A,color:I,collection_id:L||null}),f.success("Habit updated")):(await Ie(s.id,O,A,I,L||null),f.success("Habit created")),q(),M()}catch{f.error(D?"Failed to update habit":"Failed to create habit")}},ee=t=>{K(t),Y(t.name),H(t.target_days),R(t.color),X(t.collection_id||""),_(!0)},q=()=>{_(!1),K(null),Y(""),H(E(x)),R("indigo"),X("")},te=()=>{H(E(x)),_(!0)},je=async t=>{t.preventDefault();try{await Re(s.id,Q),f.success("Collection created"),k(!1),V(""),M()}catch{f.error("Failed to create collection")}},se=async t=>{if(confirm("Delete this habit?"))try{await Le(t),f.success("Deleted"),M()}catch{f.error("Failed to delete")}},ye=async t=>{if(confirm("Delete collection? Habits will be unassigned."))try{await Xe(t),f.success("Collection deleted"),M()}catch{f.error("Failed to delete collection")}},ve=t=>{const a=new Set(U);a.has(t)?a.delete(t):a.add(t),J(a)},ae=async t=>{const a=j(h,"yyyy-MM-dd"),i=u.some(y=>y.habit_id===t&&y.date===a);let p;i?p=u.filter(y=>!(y.habit_id===t&&y.date===a)):p=[...u,{habit_id:t,date:a}],v(p);try{await qe(s.id,t,a)}catch{f.error("Failed to update"),M()}},ne=t=>u.filter(a=>a.habit_id===t).length,le=t=>{const a=j(h,"yyyy-MM-dd");return u.some(i=>i.habit_id===t&&i.date===a)},we=l.filter(t=>!t.collection_id),ke=r.map(t=>({...t,habits:l.filter(a=>a.collection_id===t.id)})),Ne=Pe({start:oe(ce(x)),end:ue(de(x))}),Ce=[{id:"indigo",class:"bg-indigo-500"},{id:"rose",class:"bg-rose-500"},{id:"emerald",class:"bg-emerald-500"},{id:"amber",class:"bg-amber-500"},{id:"sky",class:"bg-sky-500"},{id:"violet",class:"bg-violet-500"}];return b&&l.length===0?e.jsx(Ge,{className:"h-96 w-full rounded-3xl"}):e.jsxs("div",{className:"max-w-7xl mx-auto pb-20 px-4 md:px-8 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:"Productivity"}),e.jsx("p",{className:"text-neutral-500 dark:text-slate-400",children:"Track your habits and screen time"})]}),e.jsxs($e,{to:"/productivity/analytics",className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl font-medium hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[e.jsx(Te,{size:20}),e.jsx("span",{children:"Analytics"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"lg:w-96 shrink-0 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 md:p-6 shadow-sm border border-neutral-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-neutral-800 dark:text-white capitalize w-32",children:j(x,"MMMM yyyy")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$(st(x)),className:"p-2 hover:bg-neutral-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(Oe,{size:18})}),e.jsx("button",{onClick:()=>$(be(x,1)),className:"p-2 hover:bg-neutral-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(ie,{size:18})})]})]}),e.jsx("div",{className:"grid grid-cols-7 mb-2",children:["S","M","T","W","T","F","S"].map(t=>e.jsx("div",{className:"text-center text-xs font-semibold text-neutral-400 dark:text-slate-500 py-2",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Ne.map(t=>{const a=Je(t,h),i=tt(t,x),p=Ke(t),y=j(t,"yyyy-MM-dd"),z=u.filter(Se=>Se.date===y).length,F=l.length,Me=F>0?z/F:0;return e.jsxs("button",{onClick:()=>{N(t)},className:`
                                        relative h-9 w-9 md:h-10 md:w-10 rounded-full flex items-center justify-center text-xs md:text-sm font-medium transition-all mx-auto
                                        ${i?"text-neutral-700 dark:text-slate-300":"text-neutral-300 dark:text-slate-700"}
                                        ${a?"bg-indigo-600 text-white shadow-md scale-110 z-10":"hover:bg-neutral-100 dark:hover:bg-slate-700"}
                                        ${p&&!a?"ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800":""}
                                    `,children:[j(t,"d"),!a&&z>0&&e.jsx("span",{className:`absolute bottom-1 w-1.5 h-1.5 rounded-full ${Me===1?"bg-emerald-500":"bg-indigo-400"}`})]},t.toString())})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-6 text-white shadow-xl",children:[e.jsx("h3",{className:"text-lg font-semibold opacity-90 mb-1",children:j(h,"EEEE, MMMM do")}),e.jsx("p",{className:"opacity-75 text-sm mb-6",children:"Daily Summary"}),e.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[e.jsx("span",{className:"text-4xl font-bold",children:u.filter(t=>t.date===j(h,"yyyy-MM-dd")).length}),e.jsxs("span",{className:"text-lg opacity-70 mb-1",children:["/ ",l.length]})]}),e.jsx("p",{className:"text-sm font-medium opacity-90",children:"Habits Completed"}),e.jsx("div",{className:"mt-4 h-2 bg-white/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white/90 transition-all duration-500 ease-out",style:{width:`${l.length?u.filter(t=>t.date===j(h,"yyyy-MM-dd")).length/l.length*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-neutral-100 dark:border-slate-700 sticky top-4 z-20",children:[e.jsx("h2",{className:"text-xl font-bold text-neutral-800 dark:text-white pl-2",children:"Habits"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k(!0),className:"p-2.5 rounded-xl hover:bg-neutral-100 dark:hover:bg-slate-700 text-neutral-600 dark:text-slate-300 transition-colors",title:"New Collection",children:e.jsx(Qe,{size:20})}),e.jsxs("button",{onClick:te,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2.5 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-indigo-900/20 font-medium",children:[e.jsx(Be,{size:20}),e.jsx("span",{children:"New Habit"})]})]})]}),e.jsx(at,{hours:(g==null?void 0:g.hours)??"",minutes:(g==null?void 0:g.minutes)??"",onSave:fe}),e.jsx("div",{className:"space-y-6",children:l.length===0?e.jsxs("div",{className:"text-center py-20 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-neutral-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-neutral-400 dark:text-slate-500 mb-4",children:"No habits yet."}),e.jsx("button",{onClick:te,className:"text-indigo-600 font-medium hover:underline",children:"Create your first habit"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-3",children:we.map(t=>e.jsx(he,{habit:t,isCompleted:le(t.id),handleToggle:()=>ae(t.id),handleDelete:()=>se(t.id),handleEdit:()=>ee(t),streak:ne(t.id)},t.id))}),ke.map(t=>{const a=U.has(t.id);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl overflow-hidden border border-neutral-100 dark:border-slate-700 transition-all",children:[e.jsxs("div",{onClick:()=>ve(t.id),className:"bg-neutral-50/50 dark:bg-slate-900/50 p-4 flex items-center justify-between cursor-pointer hover:bg-neutral-100 dark:hover:bg-slate-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-1.5 rounded-lg transition-colors ${a?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"text-neutral-400 dark:text-slate-500"}`,children:a?e.jsx(et,{size:18}):e.jsx(ie,{size:18})}),e.jsx(Ve,{className:`${a?"text-indigo-500":"text-neutral-400"}`,size:20}),e.jsx("h3",{className:`font-bold ${a?"text-neutral-800 dark:text-white":"text-neutral-600 dark:text-slate-400"}`,children:t.name}),e.jsx("span",{className:"text-xs font-medium bg-neutral-200 dark:bg-slate-700 px-2 py-0.5 rounded-full text-neutral-600 dark:text-slate-300",children:t.habits.length})]}),e.jsx("button",{onClick:i=>{i.stopPropagation(),ye(t.id)},className:"text-neutral-300 hover:text-red-500 p-2 transition-colors",children:e.jsx(ge,{size:16})})]}),e.jsx(G,{children:a&&e.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:e.jsxs("div",{className:"p-4 grid gap-3 border-t border-neutral-100 dark:border-slate-800/50",children:[t.habits.length===0&&e.jsx("p",{className:"text-sm text-neutral-400 italic",children:"No habits in this collection."}),t.habits.map(i=>e.jsx(he,{habit:i,isCompleted:le(i.id),handleToggle:()=>ae(i.id),handleDelete:()=>se(i.id),handleEdit:()=>ee(i),streak:ne(i.id)},i.id))]})})})]},t.id)})]})})]}),e.jsx(G,{children:T&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:q,children:e.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-white dark:bg-slate-800 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-neutral-800 dark:text-white",children:D?"Edit Habit":"Create New Habit"}),e.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-500 mb-1",children:"Habit Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full p-3 rounded-xl border border-neutral-200 bg-neutral-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:O,onChange:t=>Y(t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-500 mb-1",children:"Goal (Days)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",required:!0,min:"1",max:E(x),className:"w-full p-3 rounded-xl border border-neutral-200 bg-neutral-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:A,onChange:t=>H(t.target.value)}),e.jsx("button",{type:"button",onClick:()=>H(E(x)),className:"px-3 py-1 bg-neutral-100 dark:bg-slate-700 rounded-xl text-xs font-bold text-neutral-500 hover:text-indigo-600 hover:bg-indigo-50 transition-colors",children:"MAX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-500 mb-1",children:"Collection"}),e.jsxs("select",{className:"w-full p-3 rounded-xl border border-neutral-200 bg-neutral-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:L,onChange:t=>X(t.target.value),children:[e.jsx("option",{value:"",children:"None"}),r.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:Ce.map(t=>e.jsx("button",{type:"button",onClick:()=>R(t.id),className:`w-8 h-8 rounded-full ${t.class} ${I===t.id?"ring-2 ring-indigo-500 ring-offset-2":""}`},t.id))}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:q,className:"flex-1 py-2.5 bg-neutral-100 rounded-xl font-medium text-neutral-600 hover:bg-neutral-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 shadow-lg shadow-indigo-200",children:D?"Save Changes":"Create"})]})]})]})})}),e.jsx(G,{children:S&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>k(!1),children:e.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-white dark:bg-slate-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-neutral-800 dark:text-white",children:"New Collection"}),e.jsxs("form",{onSubmit:je,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Collection Name",required:!0,className:"w-full p-3 rounded-xl border border-neutral-200 bg-neutral-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:Q,onChange:t=>V(t.target.value)}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"flex-1 py-2.5 bg-neutral-100 rounded-xl font-medium text-neutral-600 hover:bg-neutral-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 bg-neutral-800 text-white rounded-xl font-medium hover:bg-neutral-900",children:"Create"})]})]})]})})})]})]})}export{bt as default};
