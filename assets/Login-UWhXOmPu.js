import{r as l,u as N,b as y,j as e,L as U,t as u}from"./index-DhOZtvq_.js";import{a as C}from"./entryService-CmzNReN9.js";import{B as E}from"./Button-C7agGsR8.js";function G(){const[r,m]=l.useState(!0),[d,x]=l.useState(""),[c,h]=l.useState(""),[g,b]=l.useState(""),{signIn:f,signUp:w,signInWithGoogle:p}=N(),k=y(),v=async a=>{a.preventDefault();try{if(r){let t=d.trim(),o=!t.includes("@");const n=async()=>{if(o){const{data:s,error:j}=await C(t);if(j||!s)throw new Error("Username not found");t=s}const{error:i}=await f(t,c);if(i)throw i};await u.promise(n(),{loading:"Logging in...",success:()=>(k("/"),"Welcome back!"),error:i=>{let s=i.message;return s.includes("Invalid login credentials")&&(s+=". Did you sign up with Google?"),s}})}else{const t=async()=>{const{data:o,error:n}=await w(d.trim(),c,{data:{username:g.trim()}});if(n)throw n};await u.promise(t(),{loading:"Creating account...",success:"Check your email for the confirmation link!",error:o=>o.message})}}catch{}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-slate-900 dark:to-slate-800 transition-colors duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-md border border-neutral-100/50 dark:border-slate-700 backdrop-blur-sm transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-indigo-900 dark:text-white transition-colors",children:r?"Welcome Back":"Create Account"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[!r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-slate-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-lg border border-neutral-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-neutral-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder-neutral-400",value:g,onChange:a=>b(a.target.value),required:!r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-slate-300 mb-1",children:r?"Email or Username":"Email"}),e.jsx("input",{type:r?"text":"email",className:"w-full p-3 rounded-lg border border-neutral-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-neutral-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder-neutral-400",value:d,onChange:a=>x(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-slate-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",className:"w-full p-3 rounded-lg border border-neutral-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-neutral-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder-neutral-400",value:c,onChange:a=>h(a.target.value),required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(U,{to:"/forgot-password",onClick:()=>{setError(""),setMessage("")},className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium transition-colors",children:"Forgot Password?"})}),e.jsx(E,{type:"submit",className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-600 dark:hover:bg-indigo-500 text-white active:scale-[0.98] transition-all shadow-md hover:shadow-lg",children:r?"Login":"Sign Up"}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-neutral-200 dark:border-slate-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-slate-800 text-neutral-500 dark:text-slate-400 transition-colors",children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:()=>{const a=async()=>{const{error:t}=await p();if(t)throw t};u.promise(a(),{loading:"Redirecting to Google...",error:t=>t.message})},className:"w-full py-3 bg-white dark:bg-slate-700 border border-neutral-200 dark:border-slate-600 text-neutral-700 dark:text-white rounded-lg hover:bg-neutral-50 dark:hover:bg-slate-600 font-medium transition-all flex items-center justify-center gap-2",children:[e.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-5 h-5"}),"Google"]})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-neutral-500 dark:text-slate-400",children:[r?"Don't have an account? ":"Already have an account? ",e.jsx("button",{onClick:()=>{m(!r)},className:"text-indigo-600 dark:text-indigo-400 font-semibold hover:underline",children:r?"Sign Up":"Login"})]})]})})}export{G as default};
