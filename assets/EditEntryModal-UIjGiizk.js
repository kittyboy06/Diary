import{c as b,r,j as e,X as S}from"./index-DkfBXszm.js";import{A as y,F as D}from"./index-CeDiXTHm.js";import{m as C}from"./proxy-5OYFA-Wp.js";import{C as E}from"./calendar-Br9yyzv1.js";import{S as F}from"./save-eJuo3ysK.js";import{f as I}from"./format-mVbgGZla.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=b("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=b("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),O=({isOpen:v,onClose:s,entry:a,folders:j,onSave:k})=>{const[c,o]=r.useState(""),[u,x]=r.useState(""),[i,p]=r.useState(""),[d,m]=r.useState(""),[f,h]=r.useState(!1);r.useEffect(()=>{if(a){o(a.title||""),o(a.title||""),x(a.content||""),p(a.folderId||"");let t=new Date;a.date&&(typeof a.date.toDate=="function"?t=a.date.toDate():t=new Date(a.date)),m(I(t,"yyyy-MM-dd"))}},[a]);const g=async t=>{t.preventDefault(),h(!0);try{let l=new Date;if(a.date){const n=typeof a.date.toDate=="function"?a.date.toDate():new Date(a.date);isNaN(n.getTime())||(l=new Date(n))}if(d){const[n,w,N]=d.split("-").map(Number);l.setFullYear(n),l.setMonth(w-1),l.setDate(N)}await k(a.id,{title:c,content:u,folderId:i===""?null:i,date:l.toISOString()}),s()}catch(l){console.error("Failed to save",l)}finally{h(!1)}};return v?e.jsx(y,{children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s,children:e.jsxs(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:t=>t.stopPropagation(),className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-neutral-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-neutral-800 dark:text-white",children:"Edit Entry"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-neutral-100 dark:hover:bg-slate-700 rounded-full transition-colors text-neutral-500 dark:text-slate-400",children:e.jsx(S,{size:20})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 overflow-y-auto flex-1 space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Entry Title",value:c,onChange:t=>o(t.target.value),className:"w-full text-2xl font-bold placeholder-neutral-300 dark:placeholder-slate-600 border-none focus:ring-0 p-0 text-neutral-800 dark:text-white bg-transparent"})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:d,onChange:t=>m(t.target.value),className:"pl-9 pr-4 py-2 rounded-xl border border-neutral-200 dark:border-slate-700 bg-neutral-50 dark:bg-slate-900/50 text-sm font-medium text-neutral-700 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none cursor-pointer"}),e.jsx(E,{size:16,className:"absolute left-3 top-2.5 text-neutral-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:i,onChange:t=>p(t.target.value),className:"appearance-none pl-9 pr-8 py-2 rounded-xl border border-neutral-200 dark:border-slate-700 bg-neutral-50 dark:bg-slate-900/50 text-sm font-medium text-neutral-700 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none cursor-pointer",children:[e.jsx("option",{value:"",children:"General (No Folder)"}),j.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(D,{size:16,className:"absolute left-3 top-2.5 text-neutral-400 pointer-events-none"})]})]}),e.jsx("div",{className:"flex-1 min-h-[200px]",children:e.jsx("textarea",{placeholder:"Start writing...",value:u,onChange:t=>x(t.target.value),className:"w-full h-full min-h-[300px] resize-none text-lg leading-relaxed placeholder-neutral-300 dark:placeholder-slate-600 border-none focus:ring-0 p-0 text-neutral-600 dark:text-slate-300 bg-transparent"})})]}),e.jsxs("div",{className:"p-6 border-t border-neutral-100 dark:border-slate-700 bg-neutral-50/50 dark:bg-slate-900/50 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-5 py-2.5 rounded-xl text-neutral-600 dark:text-slate-300 hover:bg-neutral-100 dark:hover:bg-slate-700 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:f,className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-2.5 rounded-xl font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-indigo-900/20 disabled:opacity-70 disabled:cursor-not-allowed",children:f?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(F,{size:18}),e.jsx("span",{children:"Save Changes"})]})})]})]})})}):null};export{O as E,G as S,L as a};
